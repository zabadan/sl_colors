'use strict';

var through2 = require('through2');
var readDir = require('./readDir');
var readSymbolicLink = require('./readSymbolicLink');
var bufferFile = require('./bufferFile');
var streamFile = require('./streamFile');

function getContents(opt) {
<<<<<<< HEAD
  return through2.obj(opt, function(file, enc, cb) {
    // Don't fail to read a directory
=======
  return through2.obj(function(file, enc, cb) {
    // don't fail to read a directory
>>>>>>> 60c0efd51e9c4271a396c74cb37c9681801184ab
    if (file.isDirectory()) {
      return readDir(file, opt, cb);
    }

<<<<<<< HEAD
    // Process symbolic links included with `followSymlinks` option
=======
    // process symbolic links included with `followSymlinks` option
>>>>>>> 60c0efd51e9c4271a396c74cb37c9681801184ab
    if (file.stat && file.stat.isSymbolicLink()) {
      return readSymbolicLink(file, opt, cb);
    }

<<<<<<< HEAD
    // Read and pass full contents
=======
    // read and pass full contents
>>>>>>> 60c0efd51e9c4271a396c74cb37c9681801184ab
    if (opt.buffer !== false) {
      return bufferFile(file, opt, cb);
    }

<<<<<<< HEAD
    // Don't buffer anything - just pass streams
=======
    // dont buffer anything - just pass streams
>>>>>>> 60c0efd51e9c4271a396c74cb37c9681801184ab
    return streamFile(file, opt, cb);
  });
}

module.exports = getContents;
